## Shell ä»å…¥é—¨åˆ°å…¥é—¨ Â· æé«˜

### ä¸€ã€shell æµç¨‹æ§åˆ¶

#### if

##### 1.1 if è¯­å¥

if è¯­å¥è¯­æ³•æ ¼å¼ï¼š

```
if condition
then
    command1 
    command2
    ...
    commandN 
fi
```

å†™æˆä¸€å¥è¯å°±æ˜¯:

```
if [ true ]; then echo "True"; fi
```

##### 1.2 if else 

```
if condition
then
    command1 
    command2
    ...
    commandN
else
    command
fi
```

##### 1.3 if else-if else

```
if condition1
then
    command1
elif condition2 
then 
    command2
else
    commandN
fi
```

é€¼é€¼ä¸€å¥ï¼šelifçªç„¶è®©æˆ‘æƒ³èµ·æ¥pyï¼ŒçœŸæ˜¯ä¸ä¹ æƒ¯ã€‚

#### for å¾ªç¯

```
for var in item1 item2 ... itemN
do
    command1
    command2
    ...
    commandN
done
```

### while è¯­å¥

```
while condition
do
    command
done
```

#### Until å¾ªç¯

**until** å¾ªç¯æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤ç›´è‡³æ¡ä»¶ä¸º true æ—¶åœæ­¢ï¼Œå’Œ **while** ç›¸åã€‚

```
until condition
do
    command
done
```

####  case

```
case å€¼ in
æ¨¡å¼1)
    command1
    command2
    ...
    commandN
    ;;
æ¨¡å¼2ï¼‰
    command1
    command2
    ...
    commandN
    ;;
esac
```

ğŸŒ°ï¼š

```
echo 'è¾“å…¥A-Dä¹‹é—´çš„å­—æ¯:'
echo "ä½ è¾“å…¥çš„å­—æ¯ä¸º:"
read AA
case $AA in 
    A) echo "ä½ é€‰æ‹©äº†A"
    ;;
    B) echo "ä½ é€‰æ‹©äº†B"
    ;;
    C) echo "ä½ é€‰æ‹©äº†C"
    ;;
    D) echo "ä½ é€‰æ‹©äº†D"
    ;;
esac
```

è¾“å‡ºï¼š

``` 
è¾“å…¥A-Dä¹‹é—´çš„å­—æ¯:
ä½ è¾“å…¥çš„å­—æ¯ä¸º:
C
ä½ é€‰æ‹©äº†C
```

#### è·³å‡ºå¾ªç¯

##### break å’Œ continue

breakå‘½ä»¤å…è®¸è·³å‡ºæ‰€æœ‰å¾ªç¯ï¼Œcontinueå‘½ä»¤å…è®¸è·³å‡ºå½“å‰å¾ªç¯

### shell å‡½æ•°

shell å¯ä»¥ç”¨æˆ·å®šä¹‰å‡½æ•°ï¼Œç„¶ååœ¨shellè„šæœ¬ä¸­å¯ä»¥éšä¾¿è°ƒç”¨

```
[ function ] funname [()]
{
    action;
    [return int;]
}
```

ğŸŒ°ï¼š

```
demoFunc() {
    echo "è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªshellå‡½æ•°"
}

echo "----å‡½æ•°æ‰§è¡Œ----"
demoFunc
echo "----å‡½æ•°ç»“æŸ----"
```

è¾“å‡ºï¼š

```
----å‡½æ•°æ‰§è¡Œ----
è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªshellå‡½æ•°
----å‡½æ•°ç»“æŸ----
```

ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¦æœ‰ **return** è¯­å¥çš„å‡½æ•°:

```
func() {
    echo "è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—"
    read numOne
    echo "è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—"
    read numTwo
    return $(($numOne+$numTwo))
}
func 
echo "ç›¸åŠ ç»“æœ $?"
```

è¾“å‡ºç»“æœï¼š

```
è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—
1
è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—
2
ç›¸åŠ ç»“æœ 3
```

å‡½æ•°è¿”å›å€¼åœ¨è°ƒç”¨è¯¥å‡½æ•°åé€šè¿‡ $? æ¥è·å¾—ã€‚

#### å‡½æ•°å‚æ•°

åœ¨Shellä¸­ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¯ä»¥å‘å…¶ä¼ é€’å‚æ•°ã€‚åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œé€šè¿‡ $n çš„å½¢å¼æ¥è·å–å‚æ•°çš„å€¼ï¼Œä¾‹å¦‚ï¼Œ$1è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°...

```
func() {
    echo "ç¬¬ä¸€ä¸ªå‚æ•°: $1"
    echo "ç¬¬äºŒä¸ªå‚æ•°: $2"
    echo "ç¬¬ä¸‰ä¸ªå‚æ•°: $3"
    echo "ç¬¬åä¸ªå‚æ•°: $10"
    echo "ç¬¬åä¸ªå‚æ•°: ${10}"
    echo "å‚æ•°æ€»æ•°æœ‰ $# ä¸ª"
    echo "è¾“å‡ºæ‰€æœ‰å‚æ•° $* "
}
func 1 2 3 4 5 6 7 8 9 10 11 12
```

è¾“å‡º:

```
ç¬¬ä¸€ä¸ªå‚æ•°: 1
ç¬¬äºŒä¸ªå‚æ•°: 2
ç¬¬ä¸‰ä¸ªå‚æ•°: 3
ç¬¬åä¸ªå‚æ•°: 10
ç¬¬åä¸ªå‚æ•°: 10
å‚æ•°æ€»æ•°æœ‰ 12 ä¸ª
è¾“å‡ºæ‰€æœ‰å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 
```

å…¶ä¸­ï¼š\$10 ä¸èƒ½è·å–ç¬¬åä¸ªå‚æ•°ï¼Œè·å–ç¬¬åä¸ªå‚æ•°éœ€è¦\${10}ã€‚å½“n>=10æ—¶ï¼Œéœ€è¦ä½¿ç”¨${n}æ¥è·å–å‚æ•°ã€‚

### å…¶ä»–

### ()ã€(())ã€[]ã€[[]]å’Œ{}

#### å•å°æ‰©å·ï¼ˆï¼‰

- å‘½ä»¤ç»„ æ‹¬å·ä¸­çš„å‘½ä»¤å°†ä¼šæ–°å¼€ä¸€ä¸ªå­shellé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥æ‹¬å·ä¸­çš„å˜é‡ä¸èƒ½å¤Ÿè¢«è„šæœ¬ä½™ä¸‹çš„éƒ¨åˆ†ä½¿ç”¨ã€‚æ‹¬å·ä¸­å¤šä¸ªå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤å¯ä»¥æ²¡æœ‰åˆ†å·ï¼Œå„å‘½ä»¤å’Œæ‹¬å·ä¹‹é—´ä¸å¿…æœ‰ç©ºæ ¼ã€‚

  ```
  a=1
  (echo "123";a="2";echo "a=$a")
  echo "a=$a"
  ```

  è¾“å‡ºï¼š

  ```
  123
  a=2
  a=1
  ```

- å‘½ä»¤æ›¿æ¢ å‘ç°äº†\$(cmd)ç»“æ„ï¼Œä¾¿å°†$(cmd)ä¸­çš„cmdæ‰§è¡Œä¸€æ¬¡ï¼Œå¾—åˆ°å…¶æ ‡å‡†è¾“å‡ºï¼Œå†å°†æ­¤è¾“å‡ºæ”¾åˆ°åŸæ¥å‘½ä»¤ã€‚

- ç”¨äºåˆå§‹åŒ–æ•°ç»„ å¦‚ï¼šarray=(a b c d)

### åŒå°æ‹¬å·(())

- è¿ç®—æ‰©å±•

  ```
  a=$((4+5))
  echo "a=$a"	#9
  ```

- åšæ•°å€¼è¿ç®—ï¼Œé‡æ–°å®šä¹‰å˜é‡

  ```
  a=5
  ((a++))
  echo "a=$a"	#6
  ```

- ç”¨äºç®—æœ¯è¿ç®—æ¯”è¾ƒ

  ```
  if ((1+1>1));then
    echo "1+1>1"
  fi
  ```

### å•ä¸­æ‹¬å·[]

- ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œéœ€è¦æ³¨æ„ï¼Œç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¿ç®—ç¬¦åªèƒ½æ˜¯ ==å’Œ!=ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿ç®—ç¬¦å·2è¾¹å¿…é¡»æœ‰ç©ºæ ¼ï¼Œä¸ç„¶ç»“æœä¸æ­£ç¡®ã€‚

  ```
  if [ "2" == "2" ]
  then 
      echo "ç›¸ç­‰"
  else 
      echo "ä¸ç›¸ç­‰"
  fi
  ```

- ç”¨äºæ•´æ•°æ¯”è¾ƒ éœ€è¦æ³¨æ„ï¼Œæ•´æ•°æ¯”è¾ƒï¼Œåªèƒ½ç”¨-eqï¼Œ-gtè¿™ç§å½¢å¼ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨å¤§äº(>)å°äº(<)ç¬¦å·ã€‚åªèƒ½ç”¨äºæ•´å½¢

  ```
  if [ 2 -eq 2 ]
  then 
      echo "ç›¸ç­‰"
  else 
      echo "ä¸ç›¸ç­‰"
  fi
  ```

### åŒä¸­æ‹¬å·[[]]

â€‹	[[]]æ˜¯ bash ç¨‹åºè¯­è¨€çš„å…³é”®å­—ã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œ[[ ]] ç»“æ„æ¯”[ ]ç»“æ„æ›´åŠ é€šç”¨ã€‚

- å­—ç¬¦ä¸²åŒ¹é…æ—¶ç”šè‡³æ”¯æŒç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼

  ```
  if [[ "123" == 12* ]]
  then    
      echo "ok"
  fi
  ```

- æ”¯æŒå¯¹æ•°å­—çš„åˆ¤æ–­ï¼Œæ˜¯æ”¯æŒæµ®ç‚¹å‹çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ä½¿ç”¨<ã€>ã€==ã€!=ç¬¦å·

  ```
  if [[  2.1 > 1.1 ]]; then
    echo "ok"
  fi
  ```

- å¤šä¸ªé€»è¾‘åˆ¤æ–­ å¯ä»¥ç›´æ¥ä½¿ç”¨&&ã€||åšé€»è¾‘è¿ç®—ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šä¸ª[[]]ä¹‹é—´è¿›è¡Œè¿ç®—

  ```
  if [[  1.1 > 1.1 ]] || [[ 1.1 == 1.1 ]]; then
    echo "ok"
  fi
  ```

### å¤§æ‹¬å·{}

- ç»Ÿé…æ‰©å±•

  ```
  touch new_{1..5}.txt #åˆ›å»ºnew_1.txt	new_2.txt	new_3.txt	new_4.txt	new_5.txt  5ä¸ªæ–‡ä»¶
  ```

